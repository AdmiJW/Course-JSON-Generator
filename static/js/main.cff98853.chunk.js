(this["webpackJsonpjson-course-generator"]=this["webpackJsonpjson-course-generator"]||[]).push([[0],{21:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),a=n(6),i=n.n(a),c=n(4),s=n(2),l=n(3),u=n(5);function d(e){return m(JSON.parse(JSON.stringify(e)))}function m(e){for(var t in e)"meta"===t?delete e[t]:"object"===typeof e[t]&&m(e[t]);return e}var b=function(e){return{id:e,meta:{nextSectionID:0},name:"Untitled Course",code:"",sections:{}}},j=function(e){return{id:e,meta:{nextTimeID:0},section:"",lecturer:"",times:{}}},f=function(e){return{id:e,dayOfWeek:0,beginTime:8,endTime:9}};function v(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4)),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",t),o.click()}function p(e,t){if(e.length<3)return{error:"Error in parsing Course. Expected 3 tokens: courseName, courseCode, n_sections"};var n=e.shift(),o=e.shift(),r=Number(e.shift());if(isNaN(r)||r<0)return{error:"Error in parsing Course. n_sections should be a valid integer greater than 0"};var a=b(t);a.name=n,a.code=o,a.meta.nextSectionID=r;for(var i=0;i<r;++i){var c=h(e,i);if(c.error)return c;a.sections[i]=c.payload}return{ok:!0,payload:a}}function h(e,t){if(e.length<4)return{error:"Error in parsing Section. Expected 4 tokens: 'S', sectionNo, lecturerName, n_times"};var n=e.shift();if("S"!==n)return{error:"Error in parsing Section. Expected token 'S', got ".concat(n," instead")};var o=e.shift(),r=e.shift(),a=Number(e.shift());if(isNaN(a)||a<0)return{error:"Error in parsing Section. n_times should be a valid integer greater than 0"};var i=j(t);i.section=o,i.lecturer=r,i.meta.nextTimeID=a;for(var c=0;c<a;++c){var s=O(e,c);if(s.error)return s;i.times[c]=s.payload}return{ok:!0,payload:i}}function O(e,t){if(e.length<4)return{error:"Error in parsing Time. Expected 4 tokens: 'T', dayOfWeek, beginTime, endTime"};var n=e.shift();if("T"!==n)return{error:"Error in parsing Time. Expected token 'T', got ".concat(n," instead")};var o=Number(e.shift()),r=Number(e.shift()),a=Number(e.shift());if(isNaN(o)&&(o<0||o>=7))return{error:"Error in parsing Time. dayOfWeek argument should be integer in [0-7]. Got ".concat(o," instead")};if(isNaN(r)&&(r<0||r>=24))return{error:"Error in parsing Time. beginTime argument should be integer in [0-23]. Got ".concat(r," instead")};if(isNaN(a)&&(a<0||a>=24))return{error:"Error in parsing Time. endTime argument should be integer in [0-23]. Got ".concat(a," instead")};var i=f(t);return i.dayOfWeek=o,i.beginTime=r,i.endTime=a,{ok:!0,payload:i}}var g="1.0.0";var x=Object(u.b)("courses/uploadStateSaveFile",(function(e){return new Promise((function(e,t){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".json"),n.onchange=function(){var o=n.files[0];if(!o||"application/json"!==o.type)return t("Unable to read save file. Make sure you uploaded the very same save file in .json format");var r=new FileReader;r.onload=function(){var n=JSON.parse(r.result);if(!n||!n.meta)return t("Corrupted/Incorrect save file. Failed to read save file");n.meta.app_version!==g&&console.warn("Saved data is from older version of application! Old version: ",window.localStorage.getItem("app_version")),e(n)},r.readAsText(o)},n.click()}))})),N=Object(u.c)({name:"courses",initialState:{meta:{nextCourseID:0,app_version:g,currentSelectedCourse:null}},reducers:{setCurrentSelectedCourse:function(e,t){var n=t.payload.courseID;e.meta.currentSelectedCourse=n},addCourse:function(e){var t=e.meta.nextCourseID++;e[t]=b(t),e.meta.currentSelectedCourse=t},removeCourse:function(e,t){delete e[t.payload.courseID],e.meta.currentSelectedCourse=null},changeCourseName:function(e,t){var n=t.payload,o=n.courseID,r=n.name;e[o].name=r},changeCourseCode:function(e,t){var n=t.payload,o=n.courseID,r=n.code;e[o].code=r},addSection:function(e,t){var n=t.payload.courseID,o=e[n].meta.nextSectionID++;e[n].sections[o]=j(o)},removeSection:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID;delete e[o].sections[r]},changeSection:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.section;e[o].sections[r].section=a},changeLecturer:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.lecturer;e[o].sections[r].lecturer=a},addTime:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=e[o].sections[r].meta.nextTimeID++;e[o].sections[r].times[a]=f(a)},removeTime:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.timeID;delete e[o].sections[r].times[a]},changeDayOfWeek:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.timeID,i=n.dayOfWeek;e[o].sections[r].times[a].dayOfWeek=Number(i)},changeBeginTime:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.timeID,i=n.beginTime,c=e[o].sections[r].times[a];c.beginTime=Number(i),c.endTime=Math.max(Number(i)+1,c.endTime)},changeEndTime:function(e,t){var n=t.payload,o=n.courseID,r=n.sectionID,a=n.timeID,i=n.endTime;e[o].sections[r].times[a].endTime=Number(i)},saveDataIntoLocalStorage:function(e){try{window.localStorage.setItem("app_version",e.meta.app_version),window.localStorage.setItem("saved_state",JSON.stringify(e)),window.alert("Successfully saved state to local storage")}catch(t){window.alert("Error while saving to local storage. See console for more info"),console.error(t)}},loadDataFromLocalStorage:function(e){try{if(null===window.localStorage.getItem("saved_state"))throw new Error("no-save");return window.localStorage.getItem("app_version")!==g&&console.warn("Saved data is from older version of application! Old version: ",window.localStorage.getItem("app_version")),window.alert("Successfully loaded previous state from local storage"),JSON.parse(window.localStorage.getItem("saved_state"))}catch(t){"no-save"===t.message?window.alert("No previous save file found"):window.alert("Error while saving to local storage. See console for more info"),console.error(t)}},downloadStateSaveFile:function(e){v(e,"save.json")},downloadCleanData:function(e){v(d(e),"courses.json")},executeCommand:function(e,t){!function(e,t){if(0===e.length)return{};var n=e.split(";"),o=n.shift();if("addcourse"===o){var r=t.meta.nextCourseID,a=p(n,r);if(a.error)return window.alert(a.error);t[r]=a.payload,t.meta.nextCourseID++,window.alert("Course successfully added.")}else if("addcourse_n"===o){var i=Number(n.shift());if(isNaN(i)||i<0)return window.alert("addcourse_n must be followed by an integer greater than 0!");for(var c=t.meta.nextCourseID,s=c;s<c+i;++s){var l=p(n,c);if(l.error)return window.alert(l.error);t[c]=l.payload,t.meta.nextCourseID++,++c}}else window.alert("Unidentified command ".concat(o))}(t.payload,e)}},extraReducers:function(e){e.addCase(x.fulfilled,(function(e,t){return window.alert("Successfully loaded state from file"),t.payload})),e.addCase(x.rejected,(function(e,t){window.alert(t.error.message)}))}}),D=Object(l.a)(Object(l.a)({},N.actions),{},{uploadStateSaveFile:x}),I=N.reducer,S=n(0);var y=function(e){var t=e.isMobileSideListOpen,n=Object(s.b)(),o=Object(s.c)((function(e){return e.courses})),r=[],a=function(e){if(isNaN(e))return"continue";var t=o[e];r.push(Object(S.jsxs)("li",{className:"sidelist--item ".concat(t.id===o.meta.currentSelectedCourse?"sidelist--item--selected":""),onClick:function(){return n(D.setCurrentSelectedCourse({courseID:t.id}))},children:[Object(S.jsx)("p",{className:"sidelist--name",children:t.name}),Object(S.jsx)("p",{className:"sidelist--code",children:t.code})]},t.id))};for(var i in o)a(i);return Object(S.jsxs)("div",{className:"sidelist ".concat(t?"show":""),children:[Object(S.jsx)("ul",{className:"sidelist-list",children:r}),Object(S.jsx)("button",{className:"sidelist--add","aria-label":"Add blank course",title:"Add blank course",onClick:function(){return n(D.addCourse())},children:"+"})]})};function C(e){var t=e.courseID,n=e.sectionID,o=e.time,r=o.id,a=o.dayOfWeek,i=o.beginTime,c=o.endTime,l=Object(s.b)();return Object(S.jsxs)("li",{className:"time",children:[Object(S.jsxs)("select",{className:"time--dayofweek",value:a,onChange:function(e){return l(D.changeDayOfWeek({courseID:t,sectionID:n,timeID:r,dayOfWeek:e.target.value}))},children:[Object(S.jsx)("option",{value:"0",children:"Sunday"}),Object(S.jsx)("option",{value:"1",children:"Monday"}),Object(S.jsx)("option",{value:"2",children:"Tuesday"}),Object(S.jsx)("option",{value:"3",children:"Wednesday"}),Object(S.jsx)("option",{value:"4",children:"Thursday"}),Object(S.jsx)("option",{value:"5",children:"Friday"}),Object(S.jsx)("option",{value:"6",children:"Saturday"})]}),Object(S.jsxs)("select",{className:"time--beginTime",value:i,onChange:function(e){return l(D.changeBeginTime({courseID:t,sectionID:n,timeID:r,beginTime:e.target.value}))},children:[Object(S.jsx)("option",{value:"8",children:"(02) 8.00 AM"}),Object(S.jsx)("option",{value:"9",children:"(03) 9.00 AM"}),Object(S.jsx)("option",{value:"10",children:"(04) 10.00 AM"}),Object(S.jsx)("option",{value:"11",children:"(05) 11.00 AM"}),Object(S.jsx)("option",{value:"12",children:"(06) 12.00 PM"}),Object(S.jsx)("option",{value:"13",children:"(07) 1.00 PM"}),Object(S.jsx)("option",{value:"14",children:"(08) 2.00 PM"}),Object(S.jsx)("option",{value:"15",children:"(09) 3.00 PM"}),Object(S.jsx)("option",{value:"16",children:"(10) 4.00 PM"}),Object(S.jsx)("option",{value:"17",children:"(11) 5.00 PM"})]}),Object(S.jsx)("p",{children:"To"}),Object(S.jsxs)("select",{className:"time--endTime",value:c,onChange:function(e){return l(D.changeEndTime({courseID:t,sectionID:n,timeID:r,endTime:e.target.value}))},children:[Object(S.jsx)("option",{value:"9",disabled:i>9,children:"(03) 9.00 AM"}),Object(S.jsx)("option",{value:"10",disabled:i>10,children:"(04) 10.00 AM"}),Object(S.jsx)("option",{value:"11",disabled:i>11,children:"(05) 11.00 AM"}),Object(S.jsx)("option",{value:"12",disabled:i>12,children:"(06) 12.00 PM"}),Object(S.jsx)("option",{value:"13",disabled:i>13,children:"(07) 1.00 PM"}),Object(S.jsx)("option",{value:"14",disabled:i>14,children:"(08) 2.00 PM"}),Object(S.jsx)("option",{value:"15",disabled:i>15,children:"(09) 3.00 PM"}),Object(S.jsx)("option",{value:"16",disabled:i>16,children:"(10) 4.00 PM"}),Object(S.jsx)("option",{value:"17",disabled:i>17,children:"(11) 5.00 PM"}),Object(S.jsx)("option",{value:"18",disabled:i>18,children:"(11) 6.00 PM"})]}),Object(S.jsx)("button",{type:"button",className:"time--delete",onClick:function(e){return l(D.removeTime({courseID:t,sectionID:n,timeID:r}))},children:"Remove"})]})}var w=Object(o.memo)(C);function T(e){var t=e.courseID,n=e.section,o=n.id,r=n.section,a=n.lecturer,i=n.times,c=Object(s.b)(),l=[];for(var u in i)if(!isNaN(u)){var d=i[u];l.push(Object(S.jsx)(w,{courseID:t,sectionID:o,time:d},d.id))}return Object(S.jsxs)("li",{className:"section",children:[Object(S.jsxs)("div",{className:"section--meta",children:[Object(S.jsx)("input",{type:"text",className:"section--section",value:r,placeholder:"Section",onChange:function(e){return c(D.changeSection({courseID:t,sectionID:o,section:e.target.value}))}}),Object(S.jsx)("input",{type:"text",className:"section--lecturer",value:a,placeholder:"Lecturer Name",onChange:function(e){return c(D.changeLecturer({courseID:t,sectionID:o,section:e.target.value}))}})]}),Object(S.jsxs)("div",{className:"section--btngrp",children:[Object(S.jsx)("button",{type:"button",className:"section--addtime",onClick:function(e){return c(D.addTime({courseID:t,sectionID:o}))},children:"Add Time"}),Object(S.jsx)("button",{type:"button",className:"section--delete",onClick:function(e){return c(D.removeSection({courseID:t,sectionID:o}))},children:"Delete Section"})]}),Object(S.jsx)("ul",{className:"section--times",children:l})]})}var k=Object(o.memo)(T);var M=function(){var e=Object(s.c)((function(e){return e.courses})),t=Object(s.b)(),n=Object(o.useState)(!1),r=Object(c.a)(n,2),a=r[0],i=r[1];if(null===e.meta.currentSelectedCourse)return Object(S.jsx)("section",{className:"editor"});var l=e.meta.currentSelectedCourse,u=e[l],d=u.name,m=u.code,b=u.sections,j=[];for(var f in b)if(!isNaN(f)){var v=b[f];j.push(Object(S.jsx)(k,{courseID:l,section:v},v.id))}return Object(S.jsxs)("section",{className:"editor",children:[Object(S.jsx)("input",{type:"text",className:"editor__coursename",value:d,placeholder:"Course Name",onChange:function(e){return t(D.changeCourseName({courseID:l,name:e.target.value}))}}),Object(S.jsx)("input",{type:"text",className:"editor__coursecode",value:m,placeholder:"Course Code",onChange:function(e){return t(D.changeCourseCode({courseID:l,code:e.target.value}))}}),Object(S.jsxs)("div",{className:"editor__btngrp",children:[Object(S.jsx)("button",{type:"button",className:"editor__addsection",onClick:function(){return t(D.addSection({courseID:l}))},children:"Add Section"}),Object(S.jsx)("button",{type:"button",className:"editor__removecourse ".concat(a?"warn":""),onClick:function(){!1===a?(i(!0),setTimeout((function(){i(!1)}),3e3)):(t(D.removeCourse({courseID:l})),i(!1))},children:"".concat(a?"Confirm Delete?":"Delete")})]}),Object(S.jsx)("ul",{className:"sections",children:j})]})};var _=function(){var e=Object(s.b)(),t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],a=n[1],i=Object(o.useState)(""),l=Object(c.a)(i,2),u=l[0],d=l[1];return Object(S.jsxs)(o.Fragment,{children:[Object(S.jsxs)("main",{children:[Object(S.jsx)(y,{isMobileSideListOpen:r}),Object(S.jsx)(M,{})]}),Object(S.jsxs)("div",{className:"controls",children:[Object(S.jsx)("input",{type:"text",className:"controls--input controls--command","aria-label":"Field to type in command",title:"Field to type in command",placeholder:"Enter command here...",value:u,onChange:function(e){return d(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&e(D.executeCommand(u))}}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--save","aria-label":"Save into Local Storage",title:"Save into Local Storage",onClick:function(){return e(D.saveDataIntoLocalStorage())},children:Object(S.jsx)("i",{className:"far fa-save"})}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--load","aria-label":"Load from Local Storage",title:"Load from Local Storage",onClick:function(){return e(D.loadDataFromLocalStorage())},children:Object(S.jsx)("i",{className:"fas fa-database"})}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--savefile","aria-label":"Load state from file",title:"Load state from file",onClick:function(){return e(D.uploadStateSaveFile())},children:Object(S.jsx)("i",{className:"fas fa-file-import"})}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--loadfile","aria-label":"Save state as file",title:"Save state as file",onClick:function(){return e(D.downloadStateSaveFile())},children:Object(S.jsx)("i",{className:"fas fa-file-export"})}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--download","aria-label":"Download",title:"Download",onClick:function(){return e(D.downloadCleanData())},children:Object(S.jsx)("i",{className:"fas fa-file-download"})}),Object(S.jsx)("button",{type:"button",className:"controls--btn controls--mobileview","aria-label":"List",title:"List",onClick:function(){return a(!r)},children:Object(S.jsx)("i",{className:"fas fa-list-ul"})})]})]})},E=Object(u.a)({reducer:{courses:I}});i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(s.a,{store:E,children:Object(S.jsx)(_,{})})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cff98853.chunk.js.map