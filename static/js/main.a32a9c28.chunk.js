(this["webpackJsonpjson-course-generator"]=this["webpackJsonpjson-course-generator"]||[]).push([[0],{21:function(e,t,o){"use strict";o.r(t);var n=o(1),a=o.n(n),c=o(5),s=o.n(c),i=o(6),r=o(2),l=o(3),u=o(4);function d(e){return j(JSON.parse(JSON.stringify(e)))}function j(e){for(var t in e)"meta"===t?delete e[t]:"object"===typeof e[t]&&j(e[t]);return e}var m="1.0.0";function b(e,t){var o="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,4)),n=document.createElement("a");n.setAttribute("href",o),n.setAttribute("download",t),n.click()}var v=Object(u.b)("courses/uploadStateSaveFile",(function(e){return new Promise((function(e,t){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept",".json"),o.onchange=function(){var n=o.files[0];if(!n||"application/json"!==n.type)return t("Unable to read save file. Make sure you uploaded the very same save file in .json format");var a=new FileReader;a.onload=function(){var o=JSON.parse(a.result);if(!o||!o.meta)return t("Corrupted/Incorrect save file. Failed to read save file");o.meta.app_version!==m&&console.warn("Saved data is from older version of application! Old version: ",window.localStorage.getItem("app_version")),e(o)},a.readAsText(n)},o.click()}))})),f=Object(u.c)({name:"courses",initialState:{meta:{nextCourseID:0,app_version:m,currentSelectedCourse:null}},reducers:{setCurrentSelectedCourse:function(e,t){var o=t.payload.courseID;e.meta.currentSelectedCourse=o},addCourse:function(e){var t=e.meta.nextCourseID++;e[t]={id:t,meta:{nextSectionID:0},name:"Untitled Course",code:"",sections:{}},e.meta.currentSelectedCourse=t},removeCourse:function(e,t){delete e[t.payload.courseID],e.meta.currentSelectedCourse=null},changeCourseName:function(e,t){var o=t.payload,n=o.courseID,a=o.name;e[n].name=a},changeCourseCode:function(e,t){var o=t.payload,n=o.courseID,a=o.code;e[n].code=a},addSection:function(e,t){var o=t.payload.courseID,n=e[o].meta.nextSectionID++;e[o].sections[n]={id:n,meta:{nextTimeID:0},section:"",lecturer:"",times:{}}},removeSection:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID;delete e[n].sections[a]},changeSection:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.section;e[n].sections[a].section=c},changeLecturer:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.lecturer;e[n].sections[a].lecturer=c},addTime:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=e[n].sections[a].meta.nextTimeID++;e[n].sections[a].times[c]={id:c,dayOfWeek:0,beginTime:8,endTime:9}},removeTime:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.timeID;delete e[n].sections[a].times[c]},changeDayOfWeek:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.timeID,s=o.dayOfWeek;e[n].sections[a].times[c].dayOfWeek=Number(s)},changeBeginTime:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.timeID,s=o.beginTime,i=e[n].sections[a].times[c];i.beginTime=Number(s),i.endTime=Math.max(Number(s)+1,i.endTime)},changeEndTime:function(e,t){var o=t.payload,n=o.courseID,a=o.sectionID,c=o.timeID,s=o.endTime;e[n].sections[a].times[c].endTime=Number(s)},saveDataIntoLocalStorage:function(e){try{window.localStorage.setItem("app_version",e.meta.app_version),window.localStorage.setItem("saved_state",JSON.stringify(e)),window.alert("Successfully saved state to local storage")}catch(t){window.alert("Error while saving to local storage. See console for more info"),console.error(t)}},loadDataFromLocalStorage:function(e){try{if(null===window.localStorage.getItem("saved_state"))throw new Error("no-save");return window.localStorage.getItem("app_version")!==m&&console.warn("Saved data is from older version of application! Old version: ",window.localStorage.getItem("app_version")),window.alert("Successfully loaded previous state from local storage"),JSON.parse(window.localStorage.getItem("saved_state"))}catch(t){"no-save"===t.message?window.alert("No previous save file found"):window.alert("Error while saving to local storage. See console for more info"),console.error(t)}},downloadStateSaveFile:function(e){b(e,"save.json")},downloadCleanData:function(e){b(d(e),"courses.json")}},extraReducers:function(e){e.addCase(v.fulfilled,(function(e,t){return window.alert("Successfully loaded state from file"),t.payload})),e.addCase(v.rejected,(function(e,t){window.alert(t.error.message)}))}}),p=Object(l.a)(Object(l.a)({},f.actions),{},{uploadStateSaveFile:v}),O=f.reducer,h=o(0);var x=function(e){var t=e.isMobileSideListOpen,o=Object(r.b)(),n=Object(r.c)((function(e){return e.courses})),a=[],c=function(e){if(isNaN(e))return"continue";var t=n[e];a.push(Object(h.jsxs)("li",{className:"sidelist--item ".concat(t.id===n.meta.currentSelectedCourse?"sidelist--item--selected":""),onClick:function(){return o(p.setCurrentSelectedCourse({courseID:t.id}))},children:[Object(h.jsx)("p",{className:"sidelist--name",children:t.name}),Object(h.jsx)("p",{className:"sidelist--code",children:t.code})]},t.id))};for(var s in n)c(s);return Object(h.jsxs)("div",{className:"sidelist ".concat(t?"show":""),children:[Object(h.jsx)("ul",{className:"sidelist-list",children:a}),Object(h.jsx)("button",{className:"sidelist--add","aria-label":"Add blank course",title:"Add blank course",onClick:function(){return o(p.addCourse())},children:"+"})]})};function g(e){var t=e.courseID,o=e.sectionID,n=e.time,a=n.id,c=n.dayOfWeek,s=n.beginTime,i=n.endTime,l=Object(r.b)();return Object(h.jsxs)("li",{className:"time",children:[Object(h.jsxs)("select",{className:"time--dayofweek",value:c,onChange:function(e){return l(p.changeDayOfWeek({courseID:t,sectionID:o,timeID:a,dayOfWeek:e.target.value}))},children:[Object(h.jsx)("option",{value:"0",children:"Sunday"}),Object(h.jsx)("option",{value:"1",children:"Monday"}),Object(h.jsx)("option",{value:"2",children:"Tuesday"}),Object(h.jsx)("option",{value:"3",children:"Wednesday"}),Object(h.jsx)("option",{value:"4",children:"Thursday"}),Object(h.jsx)("option",{value:"5",children:"Friday"}),Object(h.jsx)("option",{value:"6",children:"Saturday"})]}),Object(h.jsxs)("select",{className:"time--beginTime",value:s,onChange:function(e){return l(p.changeBeginTime({courseID:t,sectionID:o,timeID:a,beginTime:e.target.value}))},children:[Object(h.jsx)("option",{value:"8",children:"(02) 8.00 AM"}),Object(h.jsx)("option",{value:"9",children:"(03) 9.00 AM"}),Object(h.jsx)("option",{value:"10",children:"(04) 10.00 AM"}),Object(h.jsx)("option",{value:"11",children:"(05) 11.00 AM"}),Object(h.jsx)("option",{value:"12",children:"(06) 12.00 PM"}),Object(h.jsx)("option",{value:"13",children:"(07) 1.00 PM"}),Object(h.jsx)("option",{value:"14",children:"(08) 2.00 PM"}),Object(h.jsx)("option",{value:"15",children:"(09) 3.00 PM"}),Object(h.jsx)("option",{value:"16",children:"(10) 4.00 PM"}),Object(h.jsx)("option",{value:"17",children:"(11) 5.00 PM"})]}),Object(h.jsx)("p",{children:"To"}),Object(h.jsxs)("select",{className:"time--endTime",value:i,onChange:function(e){return l(p.changeEndTime({courseID:t,sectionID:o,timeID:a,endTime:e.target.value}))},children:[Object(h.jsx)("option",{value:"9",disabled:s>9,children:"(03) 9.00 AM"}),Object(h.jsx)("option",{value:"10",disabled:s>10,children:"(04) 10.00 AM"}),Object(h.jsx)("option",{value:"11",disabled:s>11,children:"(05) 11.00 AM"}),Object(h.jsx)("option",{value:"12",disabled:s>12,children:"(06) 12.00 PM"}),Object(h.jsx)("option",{value:"13",disabled:s>13,children:"(07) 1.00 PM"}),Object(h.jsx)("option",{value:"14",disabled:s>14,children:"(08) 2.00 PM"}),Object(h.jsx)("option",{value:"15",disabled:s>15,children:"(09) 3.00 PM"}),Object(h.jsx)("option",{value:"16",disabled:s>16,children:"(10) 4.00 PM"}),Object(h.jsx)("option",{value:"17",disabled:s>17,children:"(11) 5.00 PM"}),Object(h.jsx)("option",{value:"18",disabled:s>18,children:"(11) 6.00 PM"})]}),Object(h.jsx)("button",{type:"button",className:"time--delete",onClick:function(e){return l(p.removeTime({courseID:t,sectionID:o,timeID:a}))},children:"Remove"})]})}var D=Object(n.memo)(g);function I(e){var t=e.courseID,o=e.section,n=o.id,a=o.section,c=o.lecturer,s=o.times,i=Object(r.b)(),l=[];for(var u in s)if(!isNaN(u)){var d=s[u];l.push(Object(h.jsx)(D,{courseID:t,sectionID:n,time:d},d.id))}return Object(h.jsxs)("li",{className:"section",children:[Object(h.jsxs)("div",{className:"section--meta",children:[Object(h.jsx)("input",{type:"text",className:"section--section",value:a,placeholder:"Section",onChange:function(e){return i(p.changeSection({courseID:t,sectionID:n,section:e.target.value}))}}),Object(h.jsx)("input",{type:"text",className:"section--lecturer",value:c,placeholder:"Lecturer Name",onChange:function(e){return i(p.changeLecturer({courseID:t,sectionID:n,section:e.target.value}))}})]}),Object(h.jsxs)("div",{className:"section--btngrp",children:[Object(h.jsx)("button",{type:"button",className:"section--addtime",onClick:function(e){return i(p.addTime({courseID:t,sectionID:n}))},children:"Add Time"}),Object(h.jsx)("button",{type:"button",className:"section--delete",onClick:function(e){return i(p.removeSection({courseID:t,sectionID:n}))},children:"Delete Section"})]}),Object(h.jsx)("ul",{className:"section--times",children:l})]})}var S=Object(n.memo)(I);var N=function(){var e=Object(r.c)((function(e){return e.courses})),t=Object(r.b)(),o=Object(n.useState)(!1),a=Object(i.a)(o,2),c=a[0],s=a[1];if(null===e.meta.currentSelectedCourse)return Object(h.jsx)("section",{className:"editor"});var l=e.meta.currentSelectedCourse,u=e[l],d=u.name,j=u.code,m=u.sections,b=[];for(var v in m)if(!isNaN(v)){var f=m[v];b.push(Object(h.jsx)(S,{courseID:l,section:f},f.id))}return Object(h.jsxs)("section",{className:"editor",children:[Object(h.jsx)("input",{type:"text",className:"editor__coursename",value:d,placeholder:"Course Name",onChange:function(e){return t(p.changeCourseName({courseID:l,name:e.target.value}))}}),Object(h.jsx)("input",{type:"text",className:"editor__coursecode",value:j,placeholder:"Course Code",onChange:function(e){return t(p.changeCourseCode({courseID:l,code:e.target.value}))}}),Object(h.jsxs)("div",{className:"editor__btngrp",children:[Object(h.jsx)("button",{type:"button",className:"editor__addsection",onClick:function(){return t(p.addSection({courseID:l}))},children:"Add Section"}),Object(h.jsx)("button",{type:"button",className:"editor__removecourse ".concat(c?"warn":""),onClick:function(){!1===c?(s(!0),setTimeout((function(){s(!1)}),3e3)):(t(p.removeCourse({courseID:l})),s(!1))},children:"".concat(c?"Confirm Delete?":"Delete")})]}),Object(h.jsx)("ul",{className:"sections",children:b})]})};var y=function(){var e=Object(r.b)(),t=Object(n.useState)(!1),o=Object(i.a)(t,2),a=o[0],c=o[1];return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsxs)("main",{children:[Object(h.jsx)(x,{isMobileSideListOpen:a}),Object(h.jsx)(N,{})]}),Object(h.jsxs)("div",{className:"controls--btngrp",children:[Object(h.jsx)("button",{type:"button",className:"controls--btn controls--save","aria-label":"Save into Local Storage",title:"Save into Local Storage",onClick:function(){return e(p.saveDataIntoLocalStorage())},children:Object(h.jsx)("i",{className:"far fa-save"})}),Object(h.jsx)("button",{type:"button",className:"controls--btn controls--load","aria-label":"Load from Local Storage",title:"Load from Local Storage",onClick:function(){return e(p.loadDataFromLocalStorage())},children:Object(h.jsx)("i",{className:"fas fa-database"})}),Object(h.jsx)("button",{type:"button",className:"controls--btn controls--savefile","aria-label":"Load state from file",title:"Load state from file",onClick:function(){return e(p.uploadStateSaveFile())},children:Object(h.jsx)("i",{className:"fas fa-file-import"})}),Object(h.jsx)("button",{type:"button",className:"controls--btn controls--loadfile","aria-label":"Save state as file",title:"Save state as file",onClick:function(){return e(p.downloadStateSaveFile())},children:Object(h.jsx)("i",{className:"fas fa-file-export"})}),Object(h.jsx)("button",{type:"button",className:"controls--btn controls--download","aria-label":"Download",title:"Download",onClick:function(){return e(p.downloadCleanData())},children:Object(h.jsx)("i",{className:"fas fa-file-download"})}),Object(h.jsx)("button",{type:"button",className:"controls--btn controls--mobileview","aria-label":"List",title:"List",onClick:function(){return c(!a)},children:Object(h.jsx)("i",{className:"fas fa-list-ul"})})]})]})},C=Object(u.a)({reducer:{courses:O}});s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(r.a,{store:C,children:Object(h.jsx)(y,{})})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.a32a9c28.chunk.js.map